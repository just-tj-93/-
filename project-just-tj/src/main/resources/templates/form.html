<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="/webjars/bootstrap/5.3.0/js/bootstrap.min.js"></script>
<script src="/webjars/axios/1.4.0/dist/axios.min.js"></script>
<title>여행일정공유 서비스 여정</title>
<link rel="stylesheet" type="text/css" href="css/form.css">
<link rel="stylesheet" type="text/css" href="css/font.css">
<script type="text/javascript">	
	$(function(){
		
		
	});
	$(document).ready(function() {
        var mainSelect = $('#country');
        var subSelect = $('#sub');
        var hiddenInput = $('#city');

        mainSelect.change(function() {
            var selected = $(this).val();
            
            // 서브 카테고리 초기화
            subSelect.empty().hide();
            hiddenInput.val(selected);

            if (selected === '한국') {
                subSelect.append(
                    '<option value="강릉">강릉</option>' +
                    '<option value="여수">여수</option>' +
                    '<option value="부산">부산</option>' +
                    '<option value="제주">제주</option>'
                );
                subSelect.show();
            } else if (selected === '일본') {
                subSelect.append(
                    '<option value="도쿄">도쿄</option>' +
                    '<option value="오사카">오사카</option>' +
                    '<option value="후쿠오카">후쿠오카</option>' +
                    '<option value="가고시마">가고시마</option>'
                );
                subSelect.show();
            }
        });

        subSelect.change(function() {
            hiddenInput.val($(this).val());
        });

        // 폼 제출 전 유효성 검사
        $('.form').submit(function(e) {
            if (hiddenInput.val() === '') {
                e.preventDefault();
                alert('카테고리를 선택해주세요.');
            }
        });
    });
    
</script>
</head>
<body>
	<header>
		여행 일정 공유 서비스
	</header>
	<nav>
		<div class="menu_bar">
			<div class="main" onclick="location.href='/'">
				MAIN
			</div>
			<div class="country" onclick="location.href='/country'">
				나라별
			</div>
			<div onclick="location.href='/my'">
				나의일정
			</div>
		</div>
	</nav>
	<section class="bg">
		<div class="listBox">
			<div class="formBox">
				<form th:action="@{/formOk}" method="post" class="form">		
					<input type="text" placeholder="일정 제목" name="title" size="92" style="margin-bottom: 10px; height: 40px;"/>
					<div style="margin-bottom: 10px;">
						<label for="days">여행일수</label>
						<input type="number" name="days" min="1" max="15" style="width: 40px;"/>일
					</div>
					<div style="margin-bottom: 10px;">
						<select name="country" id="country" onchange="change()" required="required">
							<option value="">나라선택</option>
							<option value="한국">한국</option>
							<option value="일본">일본</option>
						</select>
						<select id="sub" style="display: none">
							
						</select>
						<input type="hidden" name="city" id="city" value="" />
						
					</div>
					<textarea name="subtitle" id="subtitle" cols="93" rows="4" placeholder="일정소개" style="margin-bottom: 10px;"></textarea>
					<div style="text-align: right;">
						<input type="submit" value="저장"/>
						<input type="reset" value="초기화" class="reset"/>
					</div>
				</form>
			</div>
		</div>
	</section>
</body>
</html>